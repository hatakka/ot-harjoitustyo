(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),o=t.n(r),a=t(7),c=t(3),u=t(2),s=t(0),l=function(e){var n=e.filterNumbers,t=e.filterChange;return Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{value:n,onChange:t})]})},i=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,o=e.newNumber,a=e.handleNumberChange;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:o,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){var n=e.person,t=e.removePerson;return Object(s.jsxs)("div",{children:[n.name,"\xa0",n.number,Object(s.jsx)("button",{onClick:t,children:"delete"})]})},f=function(e){var n=e.persons,t=e.filterNumbers,r=e.removePerson,o=0===t.length?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(s.jsx)(s.Fragment,{children:o.map((function(e){return Object(s.jsx)(d,{person:e,removePerson:function(){return r(e)}},e.name)}))})},m=function(e){var n=e.message;return console.log(n),null===n?null:(console.log(n),Object(s.jsx)("div",{className:n.level,children:n.message}))},b=t(4),j=t.n(b),h="/api/persons",v={getAll:function(){return j.a.get(h).then((function(e){return e.data}))},create:function(e){return j.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},g=function(){var e=Object(u.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(u.useState)(""),d=Object(c.a)(o,2),b=d[0],j=d[1],h=Object(u.useState)(""),g=Object(c.a)(h,2),O=g[0],p=g[1],x=Object(u.useState)(""),w=Object(c.a)(x,2),N=w[0],C=w[1],P=Object(u.useState)(null),S=Object(c.a)(P,2),k=S[0],y=S[1],T=null;Object(u.useEffect)((function(){v.getAll().then((function(e){r(e)}))}),[]),console.log("render",t.length,"persons");var A=function(e){console.log(e),y(e),setTimeout((function(){y(null)}),5e3)};return console.log(N),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(m,{message:k}),Object(s.jsx)(l,{filterNumbers:N,filterChange:function(e){console.log(e.target.value),C(e.target.value)}},"filter"),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(i,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===b}));if(null!=n){var o=n.id;if(T={level:"info",message:"The number of '".concat(n.name,"' has been replaced")},window.confirm("'".concat(n.name,"' is already added to phonebook. Replace the old number with the new one?"))){var c=Object(a.a)(Object(a.a)({},n),{},{number:O});v.update(o,c).then((function(e){var n=t.map((function(n){return n.id!==o?n:e}));r(n),A(T),j(""),p("")})).catch((function(e){T={level:"error",message:"The person '".concat(n.name,"' was already deleted from server")},r(t.filter((function(e){return e.id!==o}))),A(T)}))}}else{var u={name:b,number:O};T={level:"info",message:"Added ".concat(u.name)},v.create(u).then((function(e){r(t.concat(e)),A(T),j(""),p("")})).catch((function(e){console.log(e),T={level:"error",message:"Unable to add a new person: '".concat(e.response.data.error,"'")},A(T)}))}},newName:b,handleNameChange:function(e){console.log(e.target.value),j(e.target.value)},newNumber:O,handleNumberChange:function(e){console.log(e.target.value),p(e.target.value)}},"personForm"),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(f,{persons:t,filterNumbers:N,removePerson:function(e){var n=e.id;T={level:"info",message:"'".concat(e.name,"' removed")},window.confirm("Delete '".concat(e.name,"?'"))&&v.remove(e.id).then((function(e){r(t.filter((function(e){return e.id!==n}))),A(T)})).catch((function(o){T={level:"error",message:"The person '".concat(e.name,"' was already deleted from server")},r(t.filter((function(e){return e.id!==n}))),A(T)}))}},"persons")]})};t(41);o.a.render(Object(s.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.2bc14a4f.chunk.js.map