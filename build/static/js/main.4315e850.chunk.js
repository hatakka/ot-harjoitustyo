(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(16),c=t.n(r),o=t(7),a=t(3),u=t(2),s=t(0),i=function(e){var n=e.filterNumbers,t=e.filterChange;return Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,c=e.newNumber,o=e.handleNumberChange;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:t,onChange:r})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:c,onChange:o})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){var n=e.person,t=e.removePerson;return Object(s.jsxs)("div",{children:[n.name,"\xa0",n.number,Object(s.jsx)("button",{onClick:t,children:"delete"})]})},f=function(e){var n=e.persons,t=e.filterNumbers,r=e.removePerson,c=0===t.length?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(s.jsx)(s.Fragment,{children:c.map((function(e){return Object(s.jsx)(d,{person:e,removePerson:function(){return r(e)}},e.name)}))})},m=function(e){var n=e.message;return console.log(n),null===n?null:(console.log(n),Object(s.jsx)("div",{className:n.level,children:n.message}))},b=t(4),h=t.n(b),j="https://pacific-ridge-80091.herokuapp.com/api/persons",v={getAll:function(){return h.a.get(j).then((function(e){return e.data}))},create:function(e){return h.a.post(j,e).then((function(e){return e.data}))},remove:function(e){return h.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))}},g=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(u.useState)(""),d=Object(a.a)(c,2),b=d[0],h=d[1],j=Object(u.useState)(""),g=Object(a.a)(j,2),O=g[0],p=g[1],x=Object(u.useState)(""),w=Object(a.a)(x,2),N=w[0],C=w[1],P=Object(u.useState)(null),k=Object(a.a)(P,2),S=k[0],y=k[1],T=null;Object(u.useEffect)((function(){v.getAll().then((function(e){r(e)}))}),[]),console.log("render",t.length,"persons");var A=function(e){console.log(e),y(e),setTimeout((function(){y(null)}),5e3)};return console.log(N),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(m,{message:S}),Object(s.jsx)(i,{filterNumbers:N,filterChange:function(e){console.log(e.target.value),C(e.target.value)}},"filter"),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(l,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===b}));if(null!=n){var c=n.id;if(T={level:"info",message:"The number of '".concat(n.name,"' has been replaced")},window.confirm("'".concat(n.name,"' is already added to phonebook. Replace the old number with the new one?"))){var a=Object(o.a)(Object(o.a)({},n),{},{number:O});v.update(c,a).then((function(e){var n=t.map((function(n){return n.id!==c?n:e}));r(n),A(T),h(""),p("")})).catch((function(e){T={level:"error",message:"The person '".concat(n.name,"' was already deleted from server")},r(t.filter((function(e){return e.id!==c}))),A(T)}))}}else{var u={name:b,number:O};T={level:"info",message:"Added ".concat(u.name)},v.create(u).then((function(e){r(t.concat(e)),A(T),h(""),p("")}))}},newName:b,handleNameChange:function(e){console.log(e.target.value),h(e.target.value)},newNumber:O,handleNumberChange:function(e){console.log(e.target.value),p(e.target.value)}},"personForm"),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(f,{persons:t,filterNumbers:N,removePerson:function(e){var n=e.id;T={level:"info",message:"'".concat(e.name,"' removed")},window.confirm("Delete '".concat(e.name,"?'"))&&v.remove(e.id).then((function(e){r(t.filter((function(e){return e.id!==n}))),A(T)})).catch((function(c){T={level:"error",message:"The person '".concat(e.name,"' was already deleted from server")},r(t.filter((function(e){return e.id!==n}))),A(T)}))}},"persons")]})};t(41);c.a.render(Object(s.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4315e850.chunk.js.map